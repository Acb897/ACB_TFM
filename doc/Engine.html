<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Engine
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Engine";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">Engine</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Engine
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Engine</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>SPO_pattern_class.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-Engine">Engine</h2>

<p>This class handles all the endpoint indexing operations.</p>

<h2 id="label-Summary">Summary</h2>

<p>Class that handles the indexing.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#hashed_patterns-instance_method" title="#hashed_patterns (instance method)">#<strong>hashed_patterns</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the hash of Subject-Predicate-Object (SPO) patterns.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#patterns-instance_method" title="#patterns (instance method)">#<strong>patterns</strong>  &#x21d2; Array </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the Array of SPO patterns.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_triple_pattern-instance_method" title="#add_triple_pattern (instance method)">#<strong>add_triple_pattern</strong>(type, s, p, o)  &#x21d2; SPO </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds the SPO pattern to the database as an instance of the SPO class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract_patterns-instance_method" title="#extract_patterns (instance method)">#<strong>extract_patterns</strong>(endpoint_URL)  &#x21d2; patterns </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Uses the query_endpoint method to get all the SPO patterns present in an
endpoint, creating an index.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#in_database%3F-instance_method" title="#in_database? (instance method)">#<strong>in_database?</strong>(s, p, o)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checks whether or not a triple has already been added to the SPO patterns
hash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(params = {})  &#x21d2; Engine </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new instance of Engine.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#query_endpoint-instance_method" title="#query_endpoint (instance method)">#<strong>query_endpoint</strong>(endpoint_URL, mode = &quot;exploratory&quot;, type = &quot;&quot;)  &#x21d2; result </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Queries an endpoint to get information for its indexing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shacl_generator-instance_method" title="#shacl_generator (instance method)">#<strong>shacl_generator</strong>(patterns_hash, output_file)  &#x21d2; File </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates SHACL shapes corresponding to all the patterns from an endpoint
and writes them to a file in turtle format.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(params = {})  &#x21d2; <tt><span class='object_link'><a href="" title="Engine (class)">Engine</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new instance of Engine.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>hashed_patterns</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the hash of SPO patterns.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>patterns</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the array of SPO patterns.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='ivar'>@hashed_patterns</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@patterns</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="hashed_patterns=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="hashed_patterns-instance_method">
  
    #<strong>hashed_patterns</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the hash of Subject-Predicate-Object (SPO) patterns.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the patterns hash.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hashed_patterns'>hashed_patterns</span>
  <span class='ivar'>@hashed_patterns</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="patterns=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="patterns-instance_method">
  
    #<strong>patterns</strong>  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the Array of SPO patterns.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the patterns array.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_patterns'>patterns</span>
  <span class='ivar'>@patterns</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_triple_pattern-instance_method">
  
    #<strong>add_triple_pattern</strong>(type, s, p, o)  &#x21d2; <tt><span class='object_link'><a href="SPO.html" title="SPO (class)">SPO</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds the SPO pattern to the database as an instance of the SPO class.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>s</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>
<dd>
<p>the Subject of the triple.</p>
</dd></dl>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>p</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>
<dd>
<p>the Predicate of the triple.</p>
</dd></dl>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>o</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>
<dd>
<p>the Object of the triple.</p>
</dd></dl>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SPO.html" title="SPO (class)">SPO</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an instance of SPO.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104
105
106
107
108
109
110
111
112
113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_triple_pattern'>add_triple_pattern</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span><span class='id identifier rubyid_p'>p</span><span class='comma'>,</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@patterns</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_type'>type</span>
        <span class='ivar'>@patterns</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="SPO.html" title="SPO (class)">SPO</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SPO.html#initialize-instance_method" title="SPO#initialize (method)">new</a></span></span><span class='lparen'>(</span>
            <span class='symbol'>:SPO_Subject</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span>
            <span class='symbol'>:SPO_Predicate</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span>
            <span class='symbol'>:SPO_Object</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_o'>o</span>
        <span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='ivar'>@patterns</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="SPO.html" title="SPO (class)">SPO</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SPO.html#initialize-instance_method" title="SPO#initialize (method)">new</a></span></span><span class='lparen'>(</span>
            <span class='symbol'>:SPO_Subject</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span>
            <span class='symbol'>:SPO_Predicate</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span>
            <span class='symbol'>:SPO_Object</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_o'>o</span>
        <span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="extract_patterns-instance_method">
  
    #<strong>extract_patterns</strong>(endpoint_URL)  &#x21d2; <tt><span class='object_link'><a href="#patterns-instance_method" title="Engine#patterns (method)">patterns</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Uses the query_endpoint method to get all the SPO patterns present in an
endpoint, creating an index.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>endpoint_URL</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the URL of the SPARQL endpoint to be indexed.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#patterns-instance_method" title="Engine#patterns (method)">patterns</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A hash containing all the SPO patterns as SPO instances.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 176</span>

<span class='kw'>def</span> <span class='id identifier rubyid_extract_patterns'>extract_patterns</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint_URL'>endpoint_URL</span><span class='rparen'>)</span>
    <span class='ivar'>@patterns</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_types_array'>types_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_exploration_results'>exploration_results</span> <span class='op'>=</span> <span class='id identifier rubyid_query_endpoint'>query_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint_URL'>endpoint_URL</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exploratory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_exploration_results'>exploration_results</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> types found</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'>#The types are stored in an array so that they can be later explored individually in order
</span>    <span class='id identifier rubyid_exploration_results'>exploration_results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution'>solution</span><span class='op'>|</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>openlink</span><span class='regexp_end'>/</span></span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>w3\.org</span><span class='regexp_end'>/</span></span>
        
        <span class='kw'>if</span> <span class='id identifier rubyid_types_array'>types_array</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>  <span class='comment'># necessary because the ruby object wont be the same object, even if the content is the same
</span>            <span class='kw'>next</span>
        <span class='kw'>else</span>
            <span class='id identifier rubyid_types_array'>types_array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
            
    <span class='id identifier rubyid_types_array'>types_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='op'>|</span>
                
        <span class='comment'>#This query asks for the types of objects and the predicates that interact with each of the types
</span>        <span class='id identifier rubyid_fsubject_results'>fsubject_results</span> <span class='op'>=</span> <span class='id identifier rubyid_query_endpoint'>query_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint_URL'>endpoint_URL</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixed_subject</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_fsubject_results'>fsubject_results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution'>solution</span><span class='op'>|</span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:object_type</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>rdf-schema</span><span class='regexp_end'>/</span></span>
            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:object_type</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>owl\#Ontology</span><span class='regexp_end'>/</span></span>
            
            <span class='comment'># do a quick lookup to see if we already know this pattern
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_in_database?'>in_database?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span><span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:predicate</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:object_type</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='comment'># this will add it to teh database if it is not known
</span>            <span class='id identifier rubyid_add_triple_pattern'>add_triple_pattern</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:predicate</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:object_type</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            
        <span class='kw'>end</span>
        <span class='id identifier rubyid_fobject_results'>fobject_results</span> <span class='op'>=</span> <span class='id identifier rubyid_query_endpoint'>query_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint_URL'>endpoint_URL</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixed_object</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_fobject_results'>fobject_results</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_solution'>solution</span><span class='op'>|</span>
            <span class='comment'># do a quick lookup to see if we already know this pattern
</span>            <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_in_database?'>in_database?</span><span class='lparen'>(</span><span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:subject_type</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:predicate</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='comment'># this will add it to teh database if it is not known
</span>            <span class='id identifier rubyid_add_triple_pattern'>add_triple_pattern</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:subject_type</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_solution'>solution</span><span class='lbracket'>[</span><span class='symbol'>:predicate</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='ivar'>@patterns</span>          
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="in_database?-instance_method">
  
    #<strong>in_database?</strong>(s, p, o)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checks whether or not a triple has already been added to the SPO patterns
hash.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>s</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>
<dd>
<p>the Subject of the triple.</p>
</dd></dl>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>p</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>
<dd>
<p>the Predicate of the triple.</p>
</dd></dl>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>o</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>
<dd>
<p>the Object of the triple.</p>
</dd></dl>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>True if the pattern already exists in the database and False if it does
not.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 85</span>

<span class='kw'>def</span> <span class='id identifier rubyid_in_database?'>in_database?</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span><span class='id identifier rubyid_p'>p</span><span class='comma'>,</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pattern_digest'>pattern_digest</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA2</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='op'>+</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='op'>+</span><span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hashed_patterns'>hashed_patterns</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_pattern_digest'>pattern_digest</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_hashed_patterns'>hashed_patterns</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pattern_digest'>pattern_digest</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="query_endpoint-instance_method">
  
    #<strong>query_endpoint</strong>(endpoint_URL, mode = &quot;exploratory&quot;, type = &quot;&quot;)  &#x21d2; <tt>result</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Queries an endpoint to get information for its indexing.</p>
<ul><li>
<p>exploratory: queries the endpoint to get the rdf:types of all typed
subjects inside of it.</p>
</li><li>
<p>fixed_subject: given a subject type (rdf:type), queries the endpoint to get
all the object types linked to it type and their corresponding predicates.</p>
</li><li>
<p>fixed_object: given an object type, queries the endpoint to get all the
subject types linked to it and their corresponding predicates.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>endpoint_URL</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the URL of the SPARQL endpoint to be queried.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mode</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;exploratory&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>There are three modes:</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The rdf:type of the subject or object for the fixed_subject and
fixed_object modes.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The result of the query.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_query_endpoint'>query_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint_URL'>endpoint_URL</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exploratory</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_abort'>abort</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must provide a type in any mode other than exploratory</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exploratory</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>and</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint_URL'>endpoint_URL</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>method:</span> <span class='symbol'>:get</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exploratory</span><span class='tstring_end'>&quot;</span></span>
        <span class='comment'>#This first query asks for the types of objects inside the triplestore
</span>        <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;END</span>
<span class='tstring_content'>SELECT DISTINCT ?type
WHERE {
?subject a ?type .
}
</span><span class='heredoc_end'>END
</span>        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_sparql'>sparql</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
    
    <span class='kw'>elsif</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixed_subject</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;END</span>
<span class='tstring_content'>    
        SELECT DISTINCT ?predicate ?object_type
        WHERE {
            ?subject a &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;.
            ?subject ?predicate ?object . 
            OPTIONAL{?object a ?object_type}.
        } limit 10
</span><span class='heredoc_end'>END
</span>        <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query is:\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_query'>query</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_sparql'>sparql</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>

    <span class='kw'>elsif</span> <span class='id identifier rubyid_mode'>mode</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixed_object</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_query'>query</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;END</span>
<span class='tstring_content'>    
        SELECT DISTINCT ?predicate ?subject_type 
        WHERE {
            ?object a &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;.
            ?subject ?predicate ?object . 
            ?subject a ?subject_type.
        } limit 10
</span><span class='heredoc_end'>END
</span>        <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query is:\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_query'>query</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_sparql'>sparql</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_query'>query</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    
    <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span>        
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shacl_generator-instance_method">
  
    #<strong>shacl_generator</strong>(patterns_hash, output_file)  &#x21d2; <tt>File</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates SHACL shapes corresponding to all the patterns from an endpoint
and writes them to a file in turtle format.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>patterns_hash</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The hash containing all the triple patterns from an endpoint as instances
of SPO.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the output file that will contain all the SHACL shapes. It is
recommended to use .ttl as its extension.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>File</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A file containing the SHACL shapes corresponding to all the SPO patterns
given as input.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'SPO_pattern_class.rb', line 221</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shacl_generator'>shacl_generator</span><span class='lparen'>(</span><span class='id identifier rubyid_patterns_hash'>patterns_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_output_file'>output_file</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_patterns_hash'>new_patterns_hash</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_output_file'>output_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
        <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@prefix sh: &lt;http://www.w3.org/ns/shacl#&gt; .\n\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_patterns_hash'>patterns_hash</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
            <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pattern'>pattern</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_new_patterns_hash'>new_patterns_hash</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Subject</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
                    <span class='id identifier rubyid_new_patterns_hash'>new_patterns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Subject</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pattern'>pattern</span>
                <span class='kw'>else</span> 
                    <span class='id identifier rubyid_new_patterns_hash'>new_patterns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Subject</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pattern'>pattern</span><span class='rbracket'>]</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='comment'>#print new_patterns_hash
</span>        <span class='id identifier rubyid_new_patterns_hash'>new_patterns_hash</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
            <span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='int'>0</span>
            <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Processing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;s shape</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_shape_intro'>shape_intro</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>Shape&gt;\n\ta sh:NodeShape ;\n\tsh:targetClass &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n</span><span class='tstring_end'>&quot;</span></span>
            <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_shape_intro'>shape_intro</span>
            <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pattern'>pattern</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Subject</span>
                    <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+=</span> <span class='int'>1</span>
                    <span class='id identifier rubyid_numero'>numero</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='const'>SPO_Subject</span> <span class='op'>==</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Subject</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='lparen'>(</span><span class='rparen'>)</span>
                    <span class='kw'>if</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>==</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='const'>SPO_Subject</span> <span class='op'>==</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Subject</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='lparen'>(</span><span class='rparen'>)</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Object</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

                            <span class='id identifier rubyid_final_property_text'>final_property_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tsh:property [\n\t\tsh:path &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Predicate</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n\t] .\n</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_final_property_text'>final_property_text</span>
                        <span class='kw'>else</span>
                            <span class='id identifier rubyid_final_property_text'>final_property_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tsh:property [\n\t\tsh:path &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Predicate</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n\t\tsh:class &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Object</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n\t] .\n</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_final_property_text'>final_property_text</span>
                        <span class='kw'>end</span>
                    <span class='kw'>else</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Object</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

                            <span class='id identifier rubyid_property_text'>property_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tsh:property [\n\t\tsh:path &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Predicate</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n\t] ;\n</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_property_text'>property_text</span>
                        <span class='kw'>else</span>
                            <span class='id identifier rubyid_property_text'>property_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\tsh:property [\n\t\tsh:path &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Predicate</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n\t\tsh:class &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='const'>SPO_Object</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ;\n\t] ;\n</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='id identifier rubyid_property_text'>property_text</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span> 
        <span class='kw'>end</span>
    <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Apr 19 23:10:47 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>